:root{
  --bg:#f5f5f5; --card:#fff; --border:#ddd; --text:#333; --muted:#666;
  --shadow-sm:0 2px 6px rgba(0,0,0,.08);
  --shadow-md:0 10px 24px rgba(0,0,0,.10);
  --shadow-lg:0 16px 32px rgba(0,0,0,.12);
  --radius:12px; --radius-lg:14px; --accent:#007bff;

  /* Calendário: JS ajusta --cal-cell-h conforme nº de linhas do mês */
  --cal-cell-h: 96px;      /* valor inicial (fallback) */
  --cal-max-h: 560px;      /* altura máxima da agenda (desktop) */
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif}
body{
  background:url('/imagens/nuvem.jpg') no-repeat center center fixed;
  background-size:cover; display:flex; min-height:100vh; color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.container{display:flex;width:100%}

/* Sidebar */
.sidebar{
  background:rgba(255,255,255,.9); backdrop-filter:blur(2px);
  width:80px; padding:20px 10px; box-shadow:2px 0 10px rgba(0,0,0,.08);
  display:flex; flex-direction:column; align-items:center; gap:20px;
  border-right:2px solid var(--border); height:100vh; position:sticky; top:0;
}
.sidebar .icon-container{
  width:50px; height:50px; border-radius:50%;
  background:var(--card); display:flex; justify-content:center; align-items:center;
  cursor:pointer; box-shadow:var(--shadow-sm);
  transition:transform .18s, box-shadow .18s, background-color .18s, filter .18s;
  position:relative; overflow:hidden; outline:none;
}
.sidebar .icon-container:hover{transform:translateY(-2px); box-shadow:var(--shadow-md); background:#fff; filter:brightness(1.02)}
.sidebar .icon-container:active{transform:translateY(0)}
.sidebar .icon-container:focus-visible{box-shadow:0 0 0 3px rgba(0,123,255,.15), var(--shadow-md)}
.sidebar .icon-container.active{box-shadow:0 0 0 2px rgba(0,123,255,.25), var(--shadow-sm)}
.sidebar .icon-container::after{
  content:""; position:absolute; inset:0;
  background:radial-gradient(60px 60px at 50% 50%, rgba(0,123,255,.08), transparent 60%);
  opacity:0; transition:opacity .18s;
}
.sidebar .icon-container:hover::after{opacity:1}
.sidebar img{width:28px; height:28px}
.sidebar .logout{margin-top:auto}

/* Conteúdo principal */
.main-content{flex:1; padding:20px}
.header{display:flex; justify-content:space-between; align-items:center; margin-bottom:20px}
.header h1{font-size:24px; color:var(--text); letter-spacing:.2px}

/* GRID: gráfico | agenda */
.content{
  display:grid;
  grid-template-columns: 2fr 1fr;
  gap:20px; align-items:stretch; margin-bottom:20px;
}
@media (max-width:1100px){ .content{ grid-template-columns: 1fr; } }

/* Cards */
.chart,.agenda,.notices{
  background:var(--card); border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm); border:1px solid var(--border);
  transition:box-shadow .2s, transform .2s, border-color .2s;
  animation:fadeInUp .35s ease both; display:flex; flex-direction:column;
}
.chart:hover,.agenda:hover,.notices:hover{box-shadow:var(--shadow-lg); border-color:#d6d6d6; transform:translateY(-2px)}
.card-header{
  padding:16px; border-bottom:1px dashed #e9e9e9; min-height:56px; display:flex; align-items:center;
}
.card-header h3{margin:0; font-size:18px}
.card-body{ padding:16px; flex:1; min-height:0; }

/* Gráfico */
.chart .card-body{ display:flex; min-height:320px; }
.chart .card-body canvas{ width:100% !important; height:100% !important; }

/* Agenda */
.card.agenda .card-body{ display:flex; }
.card.agenda .calendar{
  flex:1; min-height:0;
  max-height: var(--cal-max-h); /* JS encaixa as células em até essa altura */
  border:2px solid #000; border-radius:12px; background:#fff; overflow:hidden;
}

/* topo preto */
.card.agenda .calendar-header{
  display:flex; align-items:center; justify-content:space-between;
  background:#111; color:#fff; padding:8px 10px; gap:10px;
}
.card.agenda .calendar-header h2{ margin:0; font-weight:800; font-size:1.6rem; text-transform:lowercase; }
.card.agenda .calendar-header button{
  background:#111; color:#fff; border:2px solid #000; border-radius:10px; padding:6px 10px; cursor:pointer;
}
.card.agenda .calendar-header button:hover{ filter:brightness(1.1); }

/* grade */
#calendar-table{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
#calendar-table thead th{
  background:#f7f7f7; border-bottom:2px solid #000; padding:8px; font-weight:700; text-align:center;
}
#calendar-table td{
  width:14.285%;
  height: var(--cal-cell-h);                  /* JS mexe nisso */
  vertical-align:top; position:relative;
  border-left:1px solid #e5e5e5; border-bottom:1px solid #e5e5e5; background:#fff;
  padding:6px 6px 8px 6px; cursor:pointer;
}
#calendar-table td:first-child{ border-left:none; }
#calendar-table .date-number{ position:absolute; top:6px; left:8px; font-weight:700; color:#111; }
#calendar-table .events{ margin-top:26px; display:flex; flex-direction:column; gap:4px; }

/* chips */
.chip{
  --chip-bg:#64748b;
  display:inline-block; max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-size:.86rem; padding:2px 6px; border-radius:8px; color:#fff;
  background:var(--chip-bg); border:2px solid #000;
}
.chip--more{ background:#111 !important; }

/* Avisos */
.notices h3{margin-bottom:10px}
.notices p,.notices li{color:#444}
.notices ul{margin-left:18px}

/* Modais */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:1000}
.modal .modal-content{width:min(680px,92vw); max-height:80vh; overflow:auto; background:#fff; border-radius:12px; padding:18px 20px 20px; box-shadow:var(--shadow-lg)}
.modal .close{float:right; background:transparent; border:none; font-size:26px; cursor:pointer; line-height:1}
.day-list{list-style:none; margin-top:8px; display:flex; flex-direction:column; gap:10px}
.day-list li{border:1px solid #e6e6e6; border-radius:10px; padding:10px 12px; background:#fafafa}
.day-list li .pill{display:inline-block; font-size:12px; padding:2px 8px; border-radius:999px; margin-left:6px; color:#fff; vertical-align:middle}
.day-list li .pill.pendente{background:#f59e0b}
.day-list li .pill.andamento{background:#3b82f6}
.day-list li .pill.resolvido{background:#10b981}
.day-list li.empty{text-align:center; color:#666; background:#fff}

/* Ações na lista do dia */
.day-list .item-actions{ display:flex; gap:8px; margin-top:8px; }
.day-list .item-actions .btn-view{
  background:#111; color:#fff; border:2px solid #000; border-radius:10px; padding:6px 10px; font-weight:700; cursor:pointer;
}
.day-list .item-actions .btn-view:hover{ filter:brightness(1.05); }
.day-list .item-actions .btn-edit{
  background:#2563eb; color:#fff; border:2px solid #000; border-radius:10px; padding:6px 10px; font-weight:700; cursor:pointer;
}
.day-list .item-actions .btn-edit:hover{ filter:brightness(1.05); }
.day-list .item-actions .btn-del{
  background:#ef4444; color:#fff; border:2px solid #000; border-radius:10px; padding:6px 10px; font-weight:700; cursor:pointer;
}
.day-list .item-actions .btn-del:hover{ filter:brightness(1.05); }

/* Botões do modal de detalhes */
.btn{
  --btn-bg:#111; --btn-text:#fff; --btn-border:#000;
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:8px 12px; font-weight:700; letter-spacing:.2px;
  background:var(--btn-bg); color:var(--btn-text);
  border:2px solid var(--btn-border); border-radius:10px;
  cursor:pointer; transition:filter .18s, transform .08s;
  box-shadow:0 2px 0 #000;
}
.btn:hover{ filter:brightness(1.05); }
.btn:active{ transform:translateY(1px); box-shadow:0 1px 0 #000; }
.btn.primary{ --btn-bg:#2563eb; } .btn.success{ --btn-bg:#10b981; }
.btn.warning{ --btn-bg:#f59e0b; } .btn.danger { --btn-bg:#ef4444; }
.view-actions{ display:flex; gap:8px; margin-top:12px; }
.view-actions .btn{ min-width:110px; }

/* Responsivo */
@media (max-width:1100px){ :root{ --cal-max-h: 480px; } }
@media (max-width:720px){  :root{ --cal-max-h: 420px; } }

/* Acessibilidade */
@media (prefers-reduced-motion:reduce){
  .chart,.agenda,.notices,.sidebar .icon-container{transition:none !important}
}
@keyframes fadeInUp{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}
/* ====== Estilo do modal de Detalhes/EDIÇÃO ====== */
.modal .modal-content{
  width:min(780px, 94vw);                /* um pouco mais largo que 680px */
  border-radius:14px;
}

/* Cabeçalho do modal */
#viewModalTitle{
  margin: 4px 0 12px 0;
  font-size: 20px;
}

/* Corpo do modal (labels + valores ou campos de edição) */
.view-body{
  display:grid;
  grid-template-columns: 1fr 1fr;        /* 2 colunas lado a lado */
  gap: 12px 16px;
  margin-top: 6px;
}

/* cada linha do par "rótulo + valor" */
.view-body > div{
  display:flex;
  align-items:center;
  gap:8px;
  min-height:34px;
}

/* rótulo (strong) */
.view-body > div > strong{
  min-width: 130px;
  color:#111;
}

/* quando entra em modo de edição, os inputs aparecem dentro das spans (#vNome, #vData etc) */
.view-body input[type="text"],
.view-body input[type="date"],
.view-body select{
  width:100%;
  padding:8px 10px;
  border:1px solid #d5d5d5;
  border-radius:10px;
  outline:none;
  background:#fff;
  box-shadow:0 1px 0 rgba(0,0,0,.04) inset;
  font-size:14px;
}
.view-body input[type="text"]:focus,
.view-body input[type="date"]:focus,
.view-body select:focus,
.view-body textarea:focus{
  border-color:#2563eb;
  box-shadow:0 0 0 3px rgba(37,99,235,.15);
}

/* Descrição: ocupa as duas colunas e tem altura confortável */
#vDescricao{
  grid-column: 1 / -1;                   /* ocupa largura total */
  margin-top: 4px;
  line-height:1.45;
  color:#222;
  white-space:pre-wrap;                   /* quebra linhas no modo leitura */
}
#vDescricao textarea{
  width:100%;
  min-height:140px;
  padding:10px 12px;
  border:1px solid #d5d5d5;
  border-radius:12px;
  resize:vertical;
  font-size:14px;
}

/* linha “Descrição:” (o <div> anterior ao #vDescricao) também ocupa as duas colunas */
.view-body > div:has(+ #vDescricao){
  grid-column: 1 / -1;
}

/* Botões do rodapé do modal */
.view-actions{
  margin-top:16px;
  gap:10px;
}
.view-actions .btn{
  min-width:120px;
}

/* Close (X) mais visível ao foco/hover */
.modal .close{
  border-radius:8px;
  padding:2px 6px;
}
.modal .close:hover,
.modal .close:focus-visible{
  background:#f1f1f1;
}

/* responsivo: em telas pequenas vira uma coluna */
@media (max-width: 620px){
  .view-body{
    grid-template-columns: 1fr;
  }
  .view-body > div > strong{
    min-width: 100px;
  }
  #vDescricao, .view-body > div:has(+ #vDescricao){
    grid-column: auto;
  }
}
